let MarketPress,MarketPress_Product,MarketPress_Basket,MarketPress_Cart,MarketPress_Checkout,MarketPress_Cart_Customer,MarketPress_Thanks;MarketPress={init:function(){this.showHideSearch(),this.showHidePrimaryMenu(),this.showHideSecondaryMenu(),this.showHideSubMenu(),this.openCloseToc(),this.shortProduct(),this.resizeThumbnail(),this.changeThumbnail(),this.slideCategory(),this.storeSlideCategory(),this.countDown(),this.basketIcon(),this.copyLink(),this.galerySmall(),this.storeSearchBox(),MarketPress_Product.init(),MarketPress_Basket.init(),MarketPress_Checkout.init(),MarketPress_Thanks.init()},storeSlideCategory:function(){let e=document.getElementById("slide-category-store");if(void 0!==e&&null!=e){let e=document.querySelector(".slide-category-store-canvas");document.body.addEventListener("click",function(t){console.log(t),"seemore"==t.target.className?e.style.right="0px":e.style.right="-360px"})}},storeSearchBox:function(){let e=document.getElementById("store-searchbox");if(void 0!==e&&null!=e){let t=e.querySelector('input[name="s"'),r=e.querySelector(".result");t.addEventListener("keyup",function(){let s=e.querySelector("i");this.value?(s.classList.remove("lni-search-alt"),s.classList.add("lni-close"),s.addEventListener("click",function(){t.value="",s.classList.add("lni-search-alt"),s.classList.remove("lni-close"),r.querySelector(".resultbox").innerHTML="",r.style.display="none"}),$data={nonce:marketpress.nonce,s:this.value},fetch(marketpress.ajax_url+"?action=search_product",{method:"POST",body:JSON.stringify($data)}).then(e=>e.json()).then(function(e){let t=e.data,s="";for(let e=0;t.length>e;e++)s+='<a href="'+t[e].permalink+'"><div class="resultin"><div class="thumbnailer"><img src="'+t[e].thumbnail_url+'" /></div><div class="contener"><div class="titler">'+t[e].title+'</div><div class="categorier">'+t[e].category+"</div></div></div></a>";r.querySelector(".resultbox").innerHTML=s,r.querySelector("label").innerHTML=e.message,r.style.display="block"}).catch(function(e){console.log(e)})):(s.classList.add("lni-search-alt"),s.classList.remove("lni-close"),r.querySelector(".resultbox").innerHTML="",r.style.display="none")})}},galerySmall:function(){let e=document.getElementById("galery-scroll");if(void 0!==e&&null!=e){let t=e.querySelector(".galerysmall"),r=e.querySelector(".arrow-left"),s=e.querySelector(".arrow-right"),a=t.scrollWidth,i=t.scrollLeft;s.addEventListener("click",function(){t.scrollTo({top:0,left:i+=210,behavior:"smooth"}),i>=a?(i=a,this.style.display="none"):this.style.display="block",r.style.display="block"}),r.addEventListener("click",function(){t.scrollTo({top:0,left:i-=200,behavior:"smooth"}),i<=0?(i=0,this.style.display="none"):this.style.display="block",s.style.display="block"})}},copyLink:function(){let e=document.querySelectorAll(".copylink");for(let t=0;t<e.length;t++)e[t].onclick=function(e){let t=this.href,r=document.createElement("input");r.setAttribute("value",t),document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),e.preventDefault()}},basketIcon:function(){let e=document.querySelector("#basket-menu-toggle");if(void 0!==e&&null!=e){let t=MarketPress_Cart_Items.get();if(t.length>0){let r=0;for(let e=0;e<t.length;e++)r+=parseInt(t[e].quantity);e.querySelector(".basket-counter").innerHTML=r,e.onclick=function(){location.href=marketpress.site_url+"/checkout/"}}}},countDown:function(){function e(e){const t=Date.parse(e)-Date.parse(new Date),r=Math.floor(t/1e3%60),s=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24),i=Math.floor(t/864e5);return{total:t,days:i,hours:a,minutes:s,seconds:r}}function t(t,r){function s(){const t=e(r),s=("0"+t.hours).slice(-2),c=("0"+t.minutes).slice(-2),u=("0"+t.seconds).slice(-2);a.innerHTML=t.days+" : ",i.innerHTML=s,o.innerHTML=c,n.innerHTML=u,t.total<=0&&clearInterval(l),t.days<=0&&(a.style.display="none");let d=new Date,p=s+":"+c+":"+u;d.setTime(d.getTime()+2592e6),document.cookie="marketpress_evergreen_scarcity="+p+";path=/;expires="+d.toGMTString()}const a=t.querySelector(".days"),i=t.querySelector(".hours"),o=t.querySelector(".minutes"),n=t.querySelector(".seconds");s();const l=setInterval(s,1e3)}let r=document.querySelectorAll(".countdown");for(let e=0;e<r.length;e++){const s=r[e].getAttribute("data-end");if(s){const a=new Date(s);t(r[e],a)}}},slideCategory:function(){let e=document.getElementById("category-slide");if(void 0!==e&&null!=e){let t=e.querySelector("ul"),r=e.querySelector(".scrollbar"),s=0,a=e.querySelector(".arrow-left"),i=e.querySelector(".arrow-right"),o=t.scrollWidth,n=t.scrollLeft;s=100*parseInt(t.clientWidth)/parseInt(t.scrollWidth),r.querySelector(".scrollbarinner").style.width=s+"%",t.addEventListener("scroll",function(e){let s=100*parseInt(e.target.scrollLeft)/parseInt(t.scrollWidth);r.querySelector(".scrollbarinner").style.marginLeft=s+"%"}),o<=t.clientWidth&&(i.style.display="none"),o=parseInt(o)-parseInt(t.clientWidth),i.addEventListener("click",function(){t.scrollTo({top:0,left:n+=210,behavior:"smooth"}),n>=o?(n=o,this.style.display="none"):this.style.display="block",a.style.display="block"}),a.addEventListener("click",function(){t.scrollTo({top:0,left:n-=200,behavior:"smooth"}),n<=0?(n=0,this.style.display="none"):this.style.display="block",i.style.display="block"})}},resizeThumbnail:function(){let e=document.querySelectorAll(".image-thumbnail");for(var t=0,r=e.length;t<r;t++){let r=e[t].offsetWidth/2;e[t].style.height=r+"px"}},changeThumbnail:function(){let e=document.querySelectorAll(".galerysmallbox");for(var t=0;t<e.length;t++)e[t].onclick=function(){let e=this.getAttribute("data-image");document.getElementById("biggalery").style.backgroundImage="url("+e+")"}},shortProduct:function(){let e=document.getElementById("product-short");null!=e&&(e.onchange=function(){window.location.replace(this.value)})},openCloseToc:function(){let e=document.getElementById("toc-toggle");if(null!=e){let t=e.parentNode.parentNode,r=t.querySelector("#toc-list");e.onclick=function(){-1!==e.className.indexOf("close")?(e.classList.remove("close"),r.classList.remove("hide"),e.innerHTML="Close"):(e.classList.add("close"),e.innerHTML="Open",r.classList.add("hide"))}}},showHideSearch:function(){let e=document.getElementById("search-toggle"),t=document.querySelector(".search-form");if(void 0!==e&&null!=e&&(e.onclick=function(e){-1!==t.className.indexOf("show")?t.classList.remove("show"):t.classList.add("show"),e.stopPropagation()}),void 0!==t&&null!=t){let e=t.querySelector(".close");e.onclick=function(e){-1!==t.className.indexOf("show")?t.classList.remove("show"):t.classList.add("show"),e.stopPropagation()}}},showHideSecondaryMenu:function(){let e=document.getElementById("secondary-menu-toggle"),t=document.querySelector(".secondary-menu");void 0!==e&&null!=e&&(e.onclick=function(e){-1!==t.className.indexOf("show")?t.classList.remove("show"):t.classList.add("show"),e.stopPropagation()})},showHidePrimaryMenu:function(){let e=document.getElementById("primary-menu-toggle"),t=document.querySelector(".primary-menu");void 0!==e&&null!=e&&(e.onclick=function(r){-1!==t.className.indexOf("show")?(t.classList.remove("show"),e.classList.remove("is-open")):(t.classList.add("show"),e.classList.add("is-open")),r.stopPropagation()})},showHideSubMenu:function(){let e=document.querySelectorAll(".menu-item-has-children");for(var t=0,r=e.length;t<r;t++){let r=e[t].querySelector(".sub-menu");e[t].addEventListener("click",function(e){-1!==r.className.indexOf("show")?r.classList.remove("show"):r.classList.add("show"),e.stopPropagation()},!1)}}},MarketPress_Product={storage:"marketpress_product",el:document.querySelector(".product"),init:function(){let e=null;localStorage.getItem(this.storage)&&(e=JSON.parse(localStorage.getItem(this.storage))),null!==e&&(this.variation1Changer(),this.variation2Changer(),this.quantityChanger(),this.addToCart(),this.singleAddToCart(),this.galerybig())},galerybig:function(){let e=this.el.querySelector(".galerybig");if(void 0!==e&&null!=e){let t=e.offsetWidth;e.style.height=t+"px"}},update:function(e,t){let r=JSON.parse(localStorage.getItem(this.storage)),s="",a="",i="";s=r.id,"quantity"==e&&(r.quantity=t),"variation1"==e&&(r.variation_1_value=t),"variation2"==e&&(r.variation_2_value=t),"note"==e&&(r.note=t),"price"==e&&(r.price=t),a=r.variation_1_value,i=r.variation_2_value,a&&(a=a.toLowerCase(),a=a.replace(/ /g,"-"),s+=a),i&&(i=i.toLowerCase(),i=i.replace(/ /g,"-"),s+=i),r.key=s,localStorage.setItem(this.storage,JSON.stringify(r))},variation1Changer:function(){let e=this.el.querySelectorAll(".variation1 .variation-radio");for(var t=0,r=e.length;t<r;t++)e[t].onclick=function(){let e=this.getAttribute("data-value");MarketPress_Product.update("variation1",e)}},variation2Changer:function(){let e=this.el.querySelectorAll(".variation2 .variation-radio");for(var t=0;t<e.length;t++)e[t].onclick=function(){let e=this.getAttribute("data-value"),t=this.getAttribute("data-price");MarketPress_Product.update("variation2",e),MarketPress_Product.update("price",parseInt(t)),MarketPress_Product.showPrice(),MarketPress_Product.countTotal(),MarketPress_Cart_Items.countSubTotal()}},quantityChanger:function(){let e=this.el.querySelector(".quantity-changer"),t=e.querySelector("input"),r=e.querySelector(".plus"),s=e.querySelector(".minus");s.onclick=function(){t.value>1&&(t.value--,MarketPress_Product.update("quantity",t.value),MarketPress_Product.countTotal())},r.onclick=function(){t.value++,MarketPress_Product.update("quantity",t.value),MarketPress_Product.countTotal(),MarketPress_Cart_Items.countSubTotal()}},countTotal:function(){let e=JSON.parse(localStorage.getItem(this.storage)),t=0;t=parseInt(e.price),e.total=t*parseInt(e.quantity),localStorage.setItem(this.storage,JSON.stringify(e))},addToCart:function(){let e=this.el.querySelector(".atc");e.onclick=function(){let e=JSON.parse(localStorage.getItem(MarketPress_Product.storage));MarketPress_Cart_Items.insert(e),MarketPress_Basket.init(),MarketPress.basketIcon(),MarketPress_Product.showAlert()}},showAlert:function(){let e=this.el.querySelector("#atc-success");void 0!==e&&null!=e&&(e.style.display="block",setTimeout(function(){e.style.display="none"},800))},singleAddToCart:function(){let e=this.el.querySelector(".buynow");e.onclick=function(){let e=JSON.parse(localStorage.getItem(MarketPress_Product.storage));MarketPress_Cart_Items.insert(e),window.location.href=marketpress.site_url+"/checkout/"}},showPrice:function(){let e=JSON.parse(localStorage.getItem(this.storage));this.el.querySelector(".price").innerHTML=marketpress.currency.format(e.price)}},MarketPress_Basket={el:document.querySelector("#basket"),init:function(){let e=MarketPress_Cart_Items.get();void 0!==this.el&&null!=this.el&&(e.length>0?this.show(e):this.hide())},show:function(e){let t=0,r=0;for(let s=0;s<e.length;s++){t+=parseInt(e[s].quantity);let a=parseInt(e[s].quantity)*parseInt(e[s].price);r+=a}this.el.querySelector(".sumary-total").innerHTML=marketpress.currency.format(r),this.el.querySelector(".sumary-item-total").innerHTML=t+" item dalam keranjang",this.el.style.display="block",this.el.querySelector(".basket-button").onclick=function(){location.href=marketpress.site_url+"/checkout/"},screen.width<=414&&(document.body.style.paddingBottom="90px")},hide:function(){}},MarketPress_Cart={},MarketPress_Checkout={el:document.querySelector("#checkout"),init:function(){void 0!==this.el&&null!=this.el&&this.loadItems()},loadItems:function(){let e=document.getElementById("checkout-item-template").innerHTML,t=[],r="",s="",a="",i=0;if(t=MarketPress_Cart_Items.get(),t.length>0)t.forEach((t,o,n)=>{r=e,a=" ",i=parseInt(t.price_stik)*t.quantity,t.variation_1_label&&t.variation_1_value&&(a+=t.variation_1_value),t.variation_2_label&&t.variation_2_value&&(a+=" - "+t.variation_2_value),$quantity=t.quantity,$total_item_weight=parseInt(t.quantity)*parseInt(t.weight),$quantity+=" - "+$total_item_weight+"gr",r=r.replace("{{id}}",t.key),r=r.replace("{{image}}",t.image),r=r.replace("{{name}}",t.name),r=r.replace("{{variation}}",a),r=r.replace("{{quantity}}",$quantity),r=r.replace("{{note}}",t.note),r=r.replace("{{price}}",marketpress.currency.format(t.total)),r=parseInt(i)>0?r.replace("{{price_stik}}",marketpress.currency.format(i)):r.replace("{{price_stik}}",""),s+=r}),this.loadDetail(),this.loadCustomerField(),this.loadCouponCheck(),this.loadPayment(),this.loadSubmit();else{let e=document.getElementById("checkout-empty-item-template").innerHTML;s=e;let t=document.querySelectorAll(".hide-if-empty-item");for(let e=0;t.length>e;e++)t[e].style.display="none"}this.el.querySelector(".checkout-items").innerHTML=s,this.itemAction()},itemAction:function(){let e=this.el.querySelectorAll(".item"),t=null;for(let r=0;e.length>r;r++)e[r].querySelector(".item-att-delete").onclick=function(){t=this.parentNode.parentNode.getAttribute("data-id"),MarketPress_Cart_Items.delete(t),MarketPress_Checkout.loadItems(),MarketPress_Checkout.loadPayment()}},loadCouponCheck:function(){let e=this.el.querySelector(".checkout-coupon"),t="";this.couponCheck(),void 0!==e&&null!=e&&(e.querySelector("button").onclick=function(){t=e.querySelector("input").value,t?(this.innerHTML="Checking ....",this.disabled=!0,e.querySelector("input").disabled=!0,MarketPress_Cart_Detail.set("discount_code",t),MarketPress_Checkout.couponCheck()):alert("masukan kode promo terlebih dulu")})},couponCheck:function(){let e=this.el.querySelector(".checkout-coupon"),t=MarketPress_Cart_Detail.get("discount_code"),r={};r.nonce=marketpress.nonce,r.code=t,r.cart_items=MarketPress_Cart_Items.get(),t&&fetch(marketpress.ajax_url+"?action=apply_coupon",{method:"POST",body:JSON.stringify(r)}).then(e=>e.json()).then(function(t){if("status"in t&&"valid"==t.status)e.querySelector(".couponbox-notice").innerHTML=t.message,e.querySelector(".couponbox-notice").style.display="block",MarketPress_Cart_Detail.set("discount_amount",t.discount),MarketPress_Cart_Detail.set("discount_code",r.code),e.querySelector(".couponbox-notice").classList.remove("error"),e.querySelector("input").value=r.code;else{MarketPress_Cart_Detail.set("discount_amount",""),MarketPress_Cart_Detail.set("discount_code","");let r="Error, please Contact this site owner";"message"in t&&(r=t.message),e.querySelector(".couponbox-notice").innerHTML=r,e.querySelector(".couponbox-notice").classList.add("error")}MarketPress_Cart_Items.countTotal(),MarketPress_Checkout.loadDetail(),e.querySelector("button").disabled=!1,e.querySelector("input").disabled=!1,e.querySelector("button").innerHTML="Terapkan"})},loadDetail:function(){MarketPress_Cart_Items.countTotal();let e=MarketPress_Cart_Detail.get("subtotal"),t=MarketPress_Cart_Detail.get("total"),r=MarketPress_Cart_Detail.get("shipping_cost"),s=MarketPress_Cart_Detail.get("discount_amount"),a=MarketPress_Cart_Detail.get("payment_cod_cost");$templ="<table>",$templ+='<tr><td>Sub Total</td><td class="value">'+marketpress.currency.format(e)+"</td></tr>",r&&($templ+='<tr><td style="color:#97A6AB">Ongkir</td><td class="value">'+marketpress.currency.format(r)+"</td></tr>"),a>0&&($templ+='<tr><td style="color:#97A6AB">Biaya COD '+marketpress.payment_cod_cost+'%</td><td class="value">'+marketpress.currency.format(a)+"</td></tr>"),s&&($templ+='<tr><td style="color:#97A6AB">Diskon</td><td class="value" style="color:green">-'+marketpress.currency.format(s)+"</td></tr>"),$templ+='<tr><td style="font-weight: bold;padding-top:10px">Total</td><td class="value" style="font-weight: bold;padding-top:10px;">'+marketpress.currency.format(t)+"</td></tr>",$templ+="</table>",this.el.querySelector(".checkout-detail").innerHTML=$templ},loadCustomerField:function(){let e=this.el.querySelector(".checkout-customer-field"),t=e.querySelectorAll("input"),r=e.querySelectorAll("textarea");for(let e=0;e<t.length;e++){let r=t[e].name;if(r){let s=MarketPress_Cart_Customer.get(r);s&&(t[e].value=s)}t[e].oninput=function(){this.name&&MarketPress_Cart_Customer.set(this.name,this.value)}}for(let e=0;e<r.length;e++){let t=r[e].name;if(t){let s=MarketPress_Cart_Customer.get(t);s&&(r[e].value=s)}r[e].oninput=function(){this.name&&MarketPress_Cart_Customer.set(this.name,this.value)}}let s=async function(){99999==marketpress.shipping_zone_subdistrict_id||(MarketPress_Cart_Customer.set("subdistrict_id",marketpress.shipping_zone_subdistrict_id),MarketPress_Cart_Customer.set("subdistrict_name",marketpress.shipping_zone_subdistrict_name));let e=MarketPress_Checkout.el.querySelector("#subdistrictSelect"),t=MarketPress_Cart_Customer.get("district_id"),r=MarketPress_Cart_Customer.get("subdistrict_id"),s=0,a=MarketPress_Checkout.el.querySelector(".checkout-shipping");const i=await fetch(marketpress.regions_source+"subdistrict.json"),o=await i.json(),n=o.filter(function(e){return e.city_id==t});e.options.length=0;for(let t=0;n.length>t;t++)e.options.add(new Option(n[t].subdistrict_name,n[t].subdistrict_id)),n[t].subdistrict_id==r&&(s=t);e.selectedIndex=s,99999==marketpress.shipping_zone_subdistrict_id?e.removeAttribute("disabled"):e.setAttribute("disabled",!0),MarketPress_Cart_Customer.set("subdistrict_id",n[s].subdistrict_id),MarketPress_Cart_Customer.set("subdistrict_name",n[s].subdistrict_name),null!=a&&MarketPress_Checkout.loadShipping(),e.addEventListener("change",t=>{MarketPress_Cart_Customer.set("subdistrict_id",n[e.selectedIndex].subdistrict_id),MarketPress_Cart_Customer.set("subdistrict_name",n[e.selectedIndex].subdistrict_name),null!=a&&(MarketPress_Checkout.loadFlatshipping(),MarketPress_Checkout.loadRajaongkir())})},a=async function(){99999==marketpress.shipping_zone_district_id||(MarketPress_Cart_Customer.set("district_id",marketpress.shipping_zone_district_id),MarketPress_Cart_Customer.set("district_name",marketpress.shipping_zone_district_name),MarketPress_Cart_Customer.set("district_type",marketpress.shipping_zone_district_type));let e=MarketPress_Checkout.el.querySelector("#districtSelect"),t=MarketPress_Cart_Customer.get("province_id",6),r=MarketPress_Cart_Customer.get("district_id"),a=0;const i=await fetch(marketpress.regions_source+"district.json"),o=await i.json(),n=o.filter(function(e){return e.province_id==t});e.options.length=0;for(let t=0;n.length>t;t++)e.options.add(new Option(n[t].type+" "+n[t].city_name,n[t].city_id)),n[t].city_id==r&&(a=t);e.selectedIndex=a,99999==marketpress.shipping_zone_district_id?e.removeAttribute("disabled"):e.setAttribute("disabled",!0),MarketPress_Cart_Customer.set("district_id",n[a].city_id),MarketPress_Cart_Customer.set("district_name",n[a].city_name),MarketPress_Cart_Customer.set("district_type",n[a].type),s(),e.addEventListener("change",e=>{MarketPress_Cart_Customer.set("district_id",n[e.target.selectedIndex].city_id),MarketPress_Cart_Customer.set("district_name",n[e.target.selectedIndex].city_name),MarketPress_Cart_Customer.set("district_type",n[e.target.selectedIndex].type),s()})},i=async function(){99999==marketpress.shipping_zone_province_id||(MarketPress_Cart_Customer.set("province_id",marketpress.shipping_zone_province_id),MarketPress_Cart_Customer.set("province_name",marketpress.shipping_zone_province_name));let e=MarketPress_Checkout.el.querySelector("#provinceSelect"),t=MarketPress_Cart_Customer.get("province_id",6),r=0;const s=await fetch(marketpress.regions_source+"province.json"),i=await s.json();for(let s=0;i.length>s;s++)e.options.add(new Option(i[s].province,i[s].province_id)),i[s].province_id==t&&(r=s);e.selectedIndex=r,99999==marketpress.shipping_zone_province_id?e.removeAttribute("disabled"):e.setAttribute("disabled",!0),MarketPress_Cart_Customer.set("province_id",i[r].province_id),MarketPress_Cart_Customer.set("province_name",i[r].province),await a(),e.addEventListener("change",t=>{MarketPress_Cart_Customer.set("province_id",i[e.selectedIndex].province_id),MarketPress_Cart_Customer.set("province_name",i[e.selectedIndex].province),a()})};i()},loadShipping:function(){let e=this.el.querySelector(".checkout-shipping");null!=e&&(this.loadFlatshipping(),this.loadRajaongkir())},showHideRajaongkir:function(){let e=this.el.querySelectorAll(".rajaongkir");for(let t=0;e.length>t;t++)e[t].querySelector(".rajaongkir-detail").onclick=function(){for(let r=0;e.length>r;r++)r!=t&&e[r].querySelector(".rajaongkir-services").classList.remove("active");e[t].querySelector(".rajaongkir-services").classList.toggle("active")};let t=this.el.querySelector(".shipping-rajaongkir"),r=t.querySelectorAll(".rajaongkir-services-service");for(let e=0;r.length>e;e++)r[e].onclick=function(){let e=t.querySelectorAll(".radios");for(let t=0;e.length>t;t++)e[t].classList.remove("checked");this.querySelector(".radios").classList.add("checked");let r=this.getAttribute("data-name"),s=this.getAttribute("data-cost"),a=this.getAttribute("data-etd");MarketPress_Cart_Detail.set("shipping_cost",s),MarketPress_Cart_Detail.set("shipping_etd",a),MarketPress_Cart_Detail.set("shipping_name",r),MarketPress_Cart_Items.countTotal(),MarketPress_Checkout.loadDetail()}},loadRajaongkir:function(){let e=this.el.querySelector(".shipping-rajaongkir"),t=MarketPress_Cart_Customer.get("district_id"),r=MarketPress_Cart_Customer.get("subdistrict_id"),s=r+"-"+t,a=MarketPress_Cart_Detail.get("weight"),i=marketpress.ajax_url+"?action=get_ongkir&nonce="+marketpress.nonce+"&destination="+s+"&weight="+a,o=document.getElementById("checkout-shipping-rajaongkir").innerHTML,n=document.getElementById("checkout-shipping-rajaongkir-service").innerHTML,l="",c=document.getElementById("checkout-loader").innerHTML;null!=e&&(MarketPress_Cart_Detail.set("shipping_cost",""),MarketPress_Cart_Detail.set("shipping_name",""),MarketPress_Cart_Detail.set("shipping_etd",""),e.innerHTML=c,t&&r&&fetch(i).then(e=>e.json()).then(function(t){if("code"in t)alert("Raja ongkir API Error : "+t.code+" | "+t.message);else{for(let e=0;e<t.length;e++){let r=o,s="";r=r.replace("{{courier-icon}}",t[e].icon),r=r.replace("{{courier-name}}",t[e].name),r=0==e?r.replace("{{classes}}"," active"):r.replace("{{classes}}","");for(let r=0;t[e].costs.length>r;r++){$templService=n;let a="";if(t[e].costs[r].etd){let s=t[e].costs[r].etd;0==s.includes("hari")&&0==s.includes("Hari")&&(a=s+" Hari")}$templService=$templService.replace("{{service-name}}",t[e].costs[r].service),$templService=$templService.replace("{{service-etd}}",a),$templService=$templService.replace("{{service-cost}}",marketpress.currency.format(t[e].costs[r].value)),$templService=$templService.replace("{{data-name}}",t[e].name+" - "+t[e].costs[r].service),$templService=$templService.replace("{{data-etd}}",a),$templService=$templService.replace("{{data-cost}}",t[e].costs[r].value),0==e&&0==r?($templService=$templService.replace("{{classes}}"," checked"),MarketPress_Cart_Detail.set("shipping_cost",t[e].costs[r].value),MarketPress_Cart_Detail.set("shipping_etd",a),MarketPress_Cart_Detail.set("shipping_name",t[e].name+" - "+t[e].costs[r].service),MarketPress_Cart_Items.countTotal(),MarketPress_Checkout.loadDetail()):$templService=$templService.replace("{{classes}}",""),s+=$templService}r=r.replace("{{services}}",s),l+=r}e.innerHTML=l,MarketPress_Checkout.showHideRajaongkir()}}).catch(function(e){alert(e)}))},loadFlatshipping:function(){let e=this.el.querySelector(".shipping-flatshipping"),t=MarketPress_Cart_Detail.get("shipping_name"),r="",s=MarketPress_Cart_Detail.get("shipping_cost");if(null!=e){let a=e.querySelectorAll(".flatshipping");t||(t=a[0].getAttribute("data-name"),s=a[0].getAttribute("data-cost"),MarketPress_Cart_Detail.set("shipping_cost",s),MarketPress_Cart_Detail.set("shipping_name",t),MarketPress_Cart_Detail.set("shipping_etd",r)),t=MarketPress_Cart_Detail.get("shipping_name");for(let e=0;a.length>e;e++)$this_shipping_name=a[e].getAttribute("data-name"),$this_shipping_name==t&&a[e].querySelector(".radios").classList.add("checked"),a[e].onclick=function(){for(var i=0;i<a.length;i++)a[i].querySelector(".radios").classList.remove("checked");t=a[e].getAttribute("data-name"),s=a[e].getAttribute("data-cost"),MarketPress_Cart_Detail.set("shipping_cost",s),MarketPress_Cart_Detail.set("shipping_name",t),MarketPress_Cart_Detail.set("shipping_etd",r),a[e].querySelector(".radios").classList.add("checked"),MarketPress_Cart_Items.countTotal(),MarketPress_Checkout.loadDetail()}}},loadPayment:function(){let e=this.el.querySelector(".checkout-payment"),t=MarketPress_Cart_Detail.get("subtotal"),r=0;if(r=parseInt(marketpress.payment_cod_cost)*t/100,MarketPress_Cart_Detail.set("payment_method",""),null!=e){$paymentboxs=e.querySelectorAll(".payment");for(let e=0;$paymentboxs.length>e;e++)$paymentboxs[e].querySelector(".payment-detail").onclick=function(){for(let t=0;$paymentboxs.length>t;t++)t!=e&&$paymentboxs[t].querySelector(".payment-lists").classList.remove("active");$paymentboxs[e].querySelector(".payment-lists").classList.toggle("active")};let t=e.querySelectorAll(".payment-lists-box");for(let s=0;t.length>s;s++)t[s].onclick=function(){let t=e.querySelectorAll(".radios");for(let e=0;t.length>e;e++)t[e].classList.remove("checked");this.querySelector(".radios").classList.add("checked");let s=this.getAttribute("data-name"),a=this.getAttribute("data-key");MarketPress_Cart_Detail.set("payment_method",s),"cod"==a?MarketPress_Cart_Detail.set("payment_cod_cost",r):MarketPress_Cart_Detail.set("payment_cod_cost",0),MarketPress_Cart_Items.countTotal(),MarketPress_Checkout.loadDetail()}}},loadSubmit:function(){let e=this.el.querySelector("#order");e.onclick=function(){let e=[],t=[{key:"name",message:"Mohon masukan nama Anda"},{key:"phone",message:"Mohon masukan nomor hp Anda"},{key:"address",message:"Mohon masukan alamat Anda"},{key:"province_id",message:"Mohon pilih nama provinsi"},{key:"district_id",message:"Mohon pilih nama Kabupaten/Kota"},{key:"subdistrict_id",message:"Mohon pilih kecamatan Anda"},{key:"postal",message:"Mohon Input kode pos Anda"}],r=[];"yes"==marketpress.payment_enable&&r.push({key:"payment_method",message:"Mohon pilih metode pembayaran"}),"yes"==marketpress.shipping_enable&&r.push({key:"shipping_cost",message:"Mohon pilih kurir pengiriman"}),t.forEach(function(t,r){MarketPress_Cart_Customer.get(t.key)||e.push(t.message)}),r.forEach(function(t,r){MarketPress_Cart_Detail.get(t.key)||e.push(t.message)}),e.length>0?MarketPress_Checkout.errorField(e[0]):(this.innerHTML="Processing ....",this.onclick=!1,MarketPress_Checkout.insertOrder())}},errorField:function(e){let t=document.getElementById("error-field-template").content.cloneNode(!0);document.body.appendChild(t);let r=document.querySelector(".error-field");r.innerHTML=e,setTimeout(function(){r.style.top="110px"},100),setTimeout(function(){r.style.top="-110px"},1500),setTimeout(function(){r.parentNode.removeChild(r)},1600)},insertOrder:function(){let e=MarketPress_Cart_Items.get();if(e.length>0){let t={};t.nonce=marketpress.nonce,t.items=e,t.detail=MarketPress_Cart_Detail.get("all"),t.customer=MarketPress_Cart_Customer.get("all"),fetch(marketpress.ajax_url+"?action=order_create",{method:"POST",body:JSON.stringify(t)}).then(e=>e.json()).then(function(e){if("yes"==marketpress.thanks_page)MarketPress_Cart_Items.empty(),window.location.href=marketpress.site_url+"/thanks/"+e.data.key;else{/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(marketpress.link_wa=marketpress.link_wa.replace("https://web.whatsapp.com/","whatsapp://"));let e=MarketPress_Cart_Items.get(),t=MarketPress_Cart_Detail.get("all"),r=MarketPress_Cart_Customer.get("all"),s="";e.forEach(function(e,t){$number=t+1,$number+=". ",$price=parseInt(e.price),s+="%0A*"+$number+e.name+"* %0A",e.variation_1_value&&(s+="  "+e.variation_1_label+": "+e.variation_1_value+" %0A"),e.variation_2_value&&(s+="  "+e.variation_2_label+": "+e.variation_2_value+" %0A"),s+="  Quantity: "+e.quantity+" %0A",s+="  Harga (@): "+marketpress.currency.format($price)+" %0A",s+="  Total Harga: "+marketpress.currency.format(e.total)+" %0A"}),s+="%0ASub Total : *"+marketpress.currency.format(t.subtotal)+"*%0A","yes"==marketpress.shipping_enable&&(s+="Ongkir : *"+marketpress.currency.format(t.shipping_cost)+"* ("+t.shipping_name+")%0A"),t.payment_cod_cost&&(s+="Biaya COD "+marketpress.payment_cod_cost+"% : *"+marketpress.currency.format(t.payment_cod_cost)+"* %0A"),t.discount_amount&&(s+="Diskon : *-"+marketpress.currency.format(t.discount_amount)+"* ("+t.discount_code+")%0A"),s+="Total : *"+marketpress.currency.format(t.total)+"*%0A%0A",s+="Metode Pembayaran : *"+t.payment_method+"* %0A";let a=marketpress.link_wa+"text=Haloo .%0A"+s+"--------------------------------%0A*Nama :*%0A"+r.name+" ( "+r.phone+" ) %0A%0A*Alamat :*%0A"+r.address.replace(/(\r\n|\n|\r)/gm,"%0A")+"%0AKecamatan. "+r.subdistrict_name+"%0A"+r.district_type+". "+r.district_name+", "+r.province_name+" "+r.postal+"%0A%0AVia "+location.href,i=960,o=540,n=Number(screen.width/2-i/2),l=Number(screen.height/2-o/2),c=window.open(a,"","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=1, copyhistory=no, width="+i+", height="+o+", top="+l+", left="+n);c.focus(),MarketPress_Cart_Items.empty(),window.location.href=marketpress.shop_now_page}}).catch(function(e){console.log(e)})}}},MarketPress_Cart_Items={storage:"marketpress_cart_items",get:function(){let e=[];return localStorage.getItem(this.storage)&&(e=JSON.parse(localStorage.getItem(this.storage))),e},empty:function(){localStorage.removeItem(this.storage)},countSubTotal:function(){let e=0,t=[],r=0,s=0,a=0;t=this.get(),t.forEach(function(t,i,o){s=parseInt(t.price),r=parseInt(s)*parseInt(t.quantity),e+=r;let n=parseInt(t.weight)*parseInt(t.quantity);a+=n}),MarketPress_Cart_Detail.set("subtotal",e),MarketPress_Cart_Detail.set("total",e),MarketPress_Cart_Detail.set("weight",a)},countTotal:function(){let e=MarketPress_Cart_Detail.get("subtotal"),t=MarketPress_Cart_Detail.get("discount_amount"),r=MarketPress_Cart_Detail.get("shipping_cost"),s=MarketPress_Cart_Detail.get("payment_cod_cost");r&&(e=parseInt(e)+parseInt(r)),s&&(e=parseInt(e)+parseInt(s)),t&&(e=parseInt(e)-parseInt(t)),MarketPress_Cart_Detail.set("total",e)},update:function(e,t="quantity",r=0){let s=this.get();s.forEach(function(a,i){e==a.key&&("quantity"==t&&(s[i].quantity=parseInt(r),s[i].total=parseInt(r)*parseInt(a.price)),"note"==t&&(s[i].note=r))}),localStorage.setItem(this.storage,JSON.stringify(s)),this.countSubTotal()},insert:function(e){let t=this.get(),r=!1;t.forEach(function(s,a){e.key==s.key&&(t[a].quantity=parseInt(e.quantity)+parseInt(s.quantity),t[a].note=e.note,r=!0)}),0==r&&t.push(e),localStorage.setItem(this.storage,JSON.stringify(t)),this.countSubTotal()},delete:function(e){let t=this.get();t.forEach(function(t,r,s){e==t.key&&s.splice(r,1)}),localStorage.setItem(this.storage,JSON.stringify(t)),this.countSubTotal()}},MarketPress_Cart_Detail={storage:"marketpress_cart_detail",get:function(e){let t={},r=!1;return localStorage.getItem(this.storage)&&(t=JSON.parse(localStorage.getItem(this.storage))),"all"==e&&(r=t),"subtotal"==e&&"subtotal"in t&&(r=t.subtotal),"weight"==e&&"weight"in t&&(r=t.weight),"shipping_cost"==e&&"shipping_cost"in t&&(r=t.shipping_cost),"shipping_name"==e&&"shipping_name"in t&&(r=t.shipping_name),"shipping_etd"==e&&"shipping_etd"in t&&(r=t.shipping_etd),"discount_amount"==e&&"discount_amount"in t&&(r=t.discount_amount),"discount_code"==e&&"discount_code"in t&&(r=t.discount_code),"payment_method"==e&&"payment_method"in t&&(r=t.payment_method),"payment_cod_cost"==e&&"payment_cod_cost"in t&&(r=t.payment_cod_cost),"total"==e&&"total"in t&&(r=t.total),r},set:function(e,t){let r={};localStorage.getItem(this.storage)&&(r=JSON.parse(localStorage.getItem(this.storage))),"subtotal"==e&&(r.subtotal=parseInt(t)),"weight"==e&&(r.weight=parseInt(t)),"shipping_cost"==e&&(r.shipping_cost=parseInt(t)),"shipping_name"==e&&(r.shipping_name=t),"shipping_etd"==e&&(r.shipping_etd=t),"discount_amount"==e&&(r.discount_amount=parseInt(t)),"discount_code"==e&&(r.discount_code=t),"payment_method"==e&&(r.payment_method=t),
"payment_cod_cost"==e&&(r.payment_cod_cost=t),"total"==e&&(r.total=parseInt(t)),localStorage.setItem(this.storage,JSON.stringify(r))}},MarketPress_Cart_Customer={storage:"marketpress_cart_customer",get:function(e,t=!1){let r={},s=t;return localStorage.getItem(this.storage)&&(r=JSON.parse(localStorage.getItem(this.storage))),"all"==e&&(s=r),"name"==e&&"name"in r&&(s=r.name),"phone"==e&&"phone"in r&&(s=r.phone),"email"==e&&"email"in r&&(s=r.email),"address"==e&&"address"in r&&(s=r.address),"subdistrict_id"==e&&"subdistrict_id"in r&&(s=r.subdistrict_id),"subdistrict_name"==e&&"subdistrict_name"in r&&(s=r.subdistrict_name),"district_id"==e&&"district_id"in r&&(s=r.district_id),"district_type"==e&&"district_type"in r&&(s=r.district_type),"district_name"==e&&"district_name"in r&&(s=r.district_name),"province_id"==e&&"province_id"in r&&(s=r.province_id),"province_name"==e&&"province_name"in r&&(s=r.province_name),"postal"==e&&"postal"in r&&(s=r.postal),s},set:function(e,t){let r={};localStorage.getItem(this.storage)&&(r=JSON.parse(localStorage.getItem(this.storage))),"name"==e&&(r.name=t),"phone"==e&&(r.phone=t),"email"==e&&(r.email=t),"address"==e&&(r.address=t),"subdistrict_name"==e&&(r.subdistrict_name=t),"subdistrict_id"==e&&(r.subdistrict_id=t),"district_name"==e&&(r.district_name=t),"district_id"==e&&(r.district_id=t),"district_type"==e&&(r.district_type=t),"province_name"==e&&(r.province_name=t),"province_id"==e&&(r.province_id=t),"postal"==e&&(r.postal=t),localStorage.setItem(this.storage,JSON.stringify(r))}},MarketPress_Thanks={el:document.querySelector("#thanks"),init:function(){void 0!==this.el&&null!=this.el&&(this.loadConfirmButton(),this.copyBankNumber())},copyBankNumber:function(){let e=this.el.querySelector("#copyBankNumber");if(void 0!==e&&null!=e){let t=e.parentNode,r=(t.querySelector("span"),t.querySelector("input"));r.style.width=8*(r.value.length+7)+"px",e.onclick=function(){console.log(),r.select(),document.execCommand("copy")}}},loadConfirmButton:function(){let e=this.el.querySelector("#confirm"),t="";e.onclick=function(){$items=marketpress_thanks.items,$detail=marketpress_thanks.detail,$customer=marketpress_thanks.customer,$items.forEach(function(e,r){$number=r+1,$number+=". ",$price=parseInt(e.price),t+="%0A*"+$number+e.name+"* %0A",e.variation_1_value&&(t+="  "+e.variation_1_label+": "+e.variation_1_value+" %0A"),e.variation_2_value&&(t+="  "+e.variation_2_label+": "+e.variation_2_value+" %0A"),t+="  Quantity: "+e.quantity+" %0A",t+="  Harga (@): "+marketpress.currency.format($price)+" %0A",t+="  Total Harga: "+marketpress.currency.format(e.total)+" %0A"}),t+="%0ASub Total : *"+marketpress.currency.format($detail.subtotal)+"*%0A","yes"==marketpress.shipping_enable&&(t+="Ongkir : *"+marketpress.currency.format($detail.shipping_cost)+"* ("+$detail.shipping_name+")%0A"),$detail.payment_cod_cost&&(t+="Biaya COD "+marketpress.payment_cod_cost+"% : *"+marketpress.currency.format($detail.payment_cod_cost)+"* %0A"),$detail.discount_amount&&(t+="Diskon : *-"+marketpress.currency.format($detail.discount_amount)+"* ("+$detail.discount_code+")%0A"),t+="Total : *"+marketpress.currency.format($detail.total)+"*%0A%0A",t+="Metode Pembayaran : *"+$detail.payment_method+"* %0A",/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(marketpress_thanks.link_wa=marketpress_thanks.link_wa.replace("https://web.whatsapp.com/","whatsapp://"));let e=marketpress_thanks.link_wa+"text=Haloo .%0A"+t+"--------------------------------%0A*Nama :*%0A"+$customer.name+" ( "+$customer.phone+" ) %0A%0A*Alamat :*%0A"+$customer.address.replace(/(\r\n|\n|\r)/gm,"%0A")+"%0AKecamatan. "+$customer.subdistrict_name+"%0A"+$customer.district_type+". "+$customer.district_name+", "+$customer.province_name+" "+$customer.postal+"%0A%0AVia "+location.href,r=960,s=540,a=Number(screen.width/2-r/2),i=Number(screen.height/2-s/2),o=window.open(e,"","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=1, copyhistory=no, width="+r+", height="+s+", top="+i+", left="+a);o.focus()}}},MarketPress.init();